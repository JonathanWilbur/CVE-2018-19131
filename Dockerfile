FROM alpine:latest
LABEL maintainer="Jonathan M. Wilbur <jonathan@wilbur.space>"

# TODO: Pin to a specific version, or even build it, because
# this vulnerable package will probably not be around for long.
RUN apk add squid
RUN /usr/lib/squid/ssl_crtd -c -s /var/lib/ssl_db
EXPOSE 3128
EXPOSE 3129
ENTRYPOINT [ "squid", "-f", "/etc/squid/squid.conf", "-NYCd", "1" ]